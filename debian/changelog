vplane-config-qos (7.0.2) unstable; urgency=medium

  * Remove yang backwards compatibility issues

 -- aroberts <aroberts@vyatta.att-mail.com>  Thu, 25 Nov 2021 11:24:11 +0000

vplane-config-qos (7.0.1) unstable; urgency=medium

  * Block mixed mark/egress map configurations

 -- aroberts <aroberts@vyatta.att-mail.com>  Mon, 30 Aug 2021 13:26:42 +0100

vplane-config-qos (7.0.0) unstable; urgency=medium

  [ aroberts ]
  * Register for VCI RPC for netconf and op-mode commands
  * Revert "Register for VCI RPC for netconf and op-mode commands"
  * Register for VCI RPC for netconf and op-mode commands

  [ Parthiban Ramalingam ]
  * QoS LAG: SNMP and NETCONF support on LAG

  [ Gavin Shearer ]
  * J2/GPC: Update validation to check not running out of statistics resources
  * GPC: fix flake8 warning due to using a tab in existing code

  [ Aidan Gallagher ]
  * Remove micro-seconds-period from test JSON.
  * Remove micro-seconds-period from profile and shaper
  * Ignore __pycache__ in tests

  [ Alan Dewar ]
  * UT: fix some pylint warnings in unit-test
  * UT: add new SIAD deployment config sanity test (Fixes: VRVDR-54979)

  [ Derek Fawcus ]
  * GPC: cope with rename of GPC elements
  * GPC: Change how classifier is referenced

  [ Karthik Murugesan ]
  * Validate WRED min and max threshold values to be less than queue-limit
  * Validate WRED min and max threshold values to be less than queue-limit

  [ Alan Dewar ]
  * Remove extraneous Yang must statement (Fixes: VRVDR-54991)

  [ Aidan Gallagher ]
  * Inital Jenkinsfile and codechecks
  * Change Jenkinsfile for QoS
  * Perlcritic fix - reorder use statements
  * Perlcritic fix - replace return undef with return
  * Perlcritic fix - declare variable on seperate line
  * Flake8 - set max line length to 120
  * Flake8 - fix E124
  * Flake8 - fix E127
  * Flake8 - fix E128
  * Flake8 - fix E131
  * Flake8 - fix E203
  * Flake8 - fix E222
  * Flake8 - fix E231
  * Flake8 - fix E265
  * Flake8 - fix E271
  * Flake8 - fix E302
  * Flake8 - fix E303
  * Flake8 - fix E305
  * Flake8 - fix E402
  * Flake8 - fix E502
  * Flake8 - fix E703
  * Flake8 - fix W291
  * Flake8 - fix W293
  * Flake 8 - fix E265
  * Flake8 - fix F401
  * Flake8 - fix E122
  * Flake8 - fix E129
  * Flake8 - fix E501
  * Configure Dram from QoS
  * Remove trailing whitespace
  * Update AT&T licence year
  * Add AT&T licence to source files
  * Add SPDX-Licence to source files
  * Update yang contact address
  * Initial port of codechecks written in bash to python
  * Replace old codechecks with python codechecks
  * Add "All rights reserved." to AT&T copyright message
  * Remove unnecessary comment

  [ Alan Dewar ]
  * GPC-VCI: designation 0 not sent down to dataplane (Fixes: VRVDR-55098)

  [ Aidan Gallagher ]
  * Revert Perlcritic fixs
  * Increase perl warning threshold

  [ aroberts ]
  * If its packets based wred setup the wred dictionary

  [ Aidan Gallagher ]
  * Jenkinsfile: use Vyatta:Unstable

  [ aroberts ]
  * Add unit tests for wred packets and time

  [ Alan Dewar ]
  * VCI: policer.py didn't handle '1g' bandwidths
  * Tighten up bandwidth yang pattern (Fixes: VRVDR-55307)
  * Add protobuf directory to sys.path (Fixes: VRVDR-55338)

  [ aroberts ]
  * Fixup queue-limit checks for all units

  [ Aidan Gallagher ]
  * Ensure all commits reference a JIRA ticket
  * Remove Perl: profile-with-a-queue-without-a-traffic-class
  * Checks traffic class does not have more than 8 queues
  * Check traffic class during validation/commit
  * Remove superfluous code in shaper check
  * Codechecks: print more more explanatory message
  * Check that only 1 queue limit type is being set

  [ Alan Dewar ]
  * VCI: fix shaper object has no attribute error
  * UT: add calls to VCI objects check methods
  * Convert qos-netconf-test.py to python3
  * Convert qos_netconf_test.py to python3
  * Convert qos_netconf_test.py to python3
  * Convert qos_netconf_test.py to python3
  * Convert qos_netconf_test.py to python3
  * Convert qos_netconf_test.py to python3
  * Convert qos_netconf_test.py to python3
  * Convert qos_netconf_test.py to python3
  * Convert qos_netconf_test.py to python3
  * Fix build breakage

  [ Aidan Gallagher ]
  * Jenkinsfile: Remove flake8 quality gates
  * Jenkinsfile: Remove Code Stats
  * Fix various flake8 warnings
  * Fix flake8 warnings

  [ Alan Dewar ]
  * UT: update unit-test to reproduce VRVDR-50590
  * VCI: fix NPF rule command generation for TCP

  [ Aidan Gallagher ]
  * Move max-threshold > queue-limit check from perl to yang
  * Move min-threshold < max-threshold from Perl to Yang
  * Remove mark-probability not set check
  * Remove filter-weight not set check
  * Remove red valid_binding function
  * Update yang revision log
  * Remove augment and uplink packages

  [ Parthiban Ramalingam ]
  * QoS: Enable "egress-map" feature on the J2

  [ Alan Dewar ]
  * VCI: stop double programming of interfaces

  [ Aidan Gallagher ]
  * Move vyatta_policy_qos_vci unit tests
  * Ignore renamed files from checks
  * Add type hinting

  [ Alan Dewar ]
  * Make two similar error messages identical

 -- aroberts <aroberts@vyatta.att-mail.com>  Tue, 17 Aug 2021 15:18:08 +0100

vplane-config-qos (6.1.0) unstable; urgency=medium

  [ Alan Dewar ]
  * GPC: remove auto-per-result and per-group keywords (Fixes: VRVDR-54744)

  [ Karthik Murugesan ]
  * QoS on LAG in router L3 mode (DCSG-BSW)
  * QoS on LAG in router L3 mode (DCSG-BSW)
  * QoS on LAG in router L3 mode (DCSG-BSW)

  [ Vinicius Soares ]
  * QoS on LAG: New class to represent the LAG membership state
  * QoS on LAG: Update QoS config logic to use the new LAG membership class
  * QoS on LAG: Update the LAG notification handling logic
  * QoS on LAG: Removed obsoleted code from the original design
  * QoS on LAG: Ignore VCI notifications if feature is not enabled
    (Fixes: VRVDR-49815)
  * QoS on LAG: Fixed debug message (Fixes: VRVDR-49815)

  [ Alan Dewar ]
  * GPC: restrict group names to 16 characters (Fixes: VRVDR-54757)

  [ Vinicius Soares ]
  * QoS LAG: Updated dependencies with vyatta-interfaces and vyatta-cfg-bonding

  [ aroberts ]
  * Add the result ketword filter-class groups

 -- Colin Docherty <colin.docherty@att.com>  Thu, 01 Apr 2021 11:11:32 +0100

vplane-config-qos (6.0.x) unstable; urgency=medium

  [ aroberts ]
  * Update the revision date so NCS/NSO upgrades correctly.
  * Update the revision date so NCS/NSO upgrades correctly.

  [ Alan Dewar ]
  * VCI: allow a class profile to be a global profile (Fixes: VRVDR-53599)
  * Allow "period" to be specified in microseconds (Fixes: VRVDR-53324)
  * UT: fix broken test_provisioner.py (Fixes: VRVDR-53656)

  [ Nicholas Brown ]
  * Python 3.6 is needed to use f-strings

  [ Ramkumar Ganapathysubramanian ]
  * vplane-cfg-qos changes to support DSCP remarking

  [ Brian Russell ]
  * Prevent priority local queue being configured in profile map

  [ Alan Dewar ]
  * VCI: stop QoS VCI crashing when dataplane is down (Fixes: VRVDR-53805)
  * VCI: fix pylint3 and flake8 errors

  [ Brian Russell ]
  * Add yang for filter classification
  * Add yang for filter group policer action
  * Add VCI code for filter classification
  * Add VCI code for filter group policer action
  * Update filter commands when GPC changes
  * Add config checks for GPC consistency

  [ Alan Dewar ]
  * Copy the traffic_type from Rules into GPCTable

  [ Karthik Murugesan ]
  * Queue depth and WRED threshold configuration enhancement

  [ Alan Dewar ]
  * GPC: stop Config.check accessing empty dictionary

  [ Ramkumar Ganapathysubramanian ]
  * Fixed issue in DSCP remarking policy removal on routed interface

  [ aroberts ]
  * Show the GPC stats via an op-mode command

  [ Vinicius Soares ]
  * QoS: Added support to hw-based QoS on bonding groups (SIAD) - data model
  * QoS: QoS policy on bonding groups, on SIAD, switch mode
  * QoS: Handle LAG membership change notifications

  [ Manohar Rapeti ]
  * QoS: Support for bonding interface in show
  * QoS: Support bonding interface specific show
  * QoS: Support for bonding interfaces to monitor
  * Qos: Support clear qos for bond group

  [ Vinicius Soares ]
  * QoS: Fixed SIAD boot with QoS on LAG configuration (Bugfix: VRVDR-49815)
  * QoS: Added old_config option to Provisioner unit tests
  * QoS: Fixed policy update on LAG (Fixes: VRVDR-49815)

  [ Manohar Rapeti ]
  * Qos: Correcting show policy qos output (Fixes: VRVDR-49815)
  * QoS: Addded feature based support (Fixes: VRVDR-49815)

  [ Vinicius Soares ]
  * QoS: Reverting the changes in QosConfig (Fixes: VRVDR-49815)
  * QoS: Moved QoS on LAG s9500's logic to a separate module
    (Fixes: VRVDR-49815)
  * QoS: QoS on LAG code must be executed only when the feature is enabled
    (Fixes: VRVDR-49815)

  [ aroberts ]
  * Update latest revision data to be post 2012 (Halifax)

 -- aroberts <aroberts@vyatta.att-mail.com>  Tue, 23 Feb 2021 12:30:06 +0000

vplane-config-qos (5.0.1) unstable; urgency=medium

  [ aroberts ]
  * Add missing revision comment for Local Priority Queue CLI
  * Add 100G bandwidth support

  [ Alan Dewar ]
  * NPF rule "bytes" and "packets" are 64-bit counters (Fixes: VRVDR-52905)

  [ aroberts ]
  * Allow number range 1-100 for input bandwidths

 -- Alan Dewar <alan.dewar@att.com>  Mon, 19 Oct 2020 15:00:37 +0100

vplane-config-qos (5.0.0) unstable; urgency=medium

  [ Brian Russell ]
  * Configure platform buffer threshold in dataplane
  * Restore ingress map feature
  * Extend mark-map yang for drop precedence
  * Extend mark-map parsing and show for drop precedence
  * Ingress map show should handle multiple DP per designation
  * Add yang to specify priority local designation
  * Add priority local designator to VCI
  * Uprev dataplane qos dependency

 -- aroberts <aroberts@vyatta.att-mail.com>  Tue, 18 Aug 2020 11:01:31 +0100

vplane-config-qos (4.0.0) unstable; urgency=medium

  [ Brian Russell ]
  * Ensure pipe queue used in designation map exists

  [ Alan Dewar ]
  * VCI: stop QoS VCI crashing with incomplete config (Fixes: VRVDR-50967)
  * UT: update test_profile.py

  [ Brian Russell ]
  * Don't send all action group json in one field

  [ Alan Dewar ]
  * VCI: support decimal fractional bandwidths (Fixes: VRVDR-51152)

  [ Brian Russell ]
  * Reload config on process restart

  [ Alan Dewar ]
  * VCI: check ingress-maps have their map-type set (Fixes: VRVDR-51554)

  [ Robert Shearman ]
  * platform: block QoS config on DANOS AS5916-54XKS platform

  [ Brian Russell ]
  * Reinstall policies when mark map changed

  [ Ramkumar Ganapathysubramanian ]
  * CLI: Added support for egress-map in Policy command.

 -- aroberts <aroberts@vyatta.att-mail.com>  Tue, 28 Jul 2020 13:03:25 +0100

vplane-config-qos (3.1.0) unstable; urgency=medium

  [ Brian Russell ]
  * Remove mark-map on trunk check
  * Allow QoS directly on dataplane interfaces for s9500
  * Allow ingress maps directly on dataplane interfaces
  * Restrict designation in mark maps
  * Deviations for J2

  [ Alan Dewar ]
  * Fix qos_op_mode.py to parse rprocs JSON element (Fixes: VRVDR-50611)
  * UT: update test_qos_op_mode.py for more coverage

  [ Brian Russell ]
  * Give op-mode commands privilege

  [ Alan Dewar ]
  * VCI: allow policer ratelimits in pps (Fixes: VRVDR-50820)
  * VCI: ratelimit period does not override default (Fixes: VRVDR-50820)
  * VCI: empty the qos_op_mode.py config cache (Fixes: VRVDR-50818)

 -- aroberts <aroberts@mail.eng.vyatta.net>  Tue, 05 May 2020 09:37:32 +0100

vplane-config-qos (3.0.1) unstable; urgency=medium

  [ Alan Dewar ]
  * VCI: log unhandled exceptions in system log
  * VCI: burst can come down as an integer (Fixes: VRVDR-50316)

  [ Ramkumar Ganapathysubramanian ]
  * Removed unnecessary yang validations for policy qos commands.

  [ Brian Russell ]
  * Re-organise YANG deviations
  * Allow multiple mark-maps
  * Correct AT&T zip code

  [ Alan Dewar ]
  * VCI: remove redundant deferred config code
  * UT: realign JSON data structures
  * VCI: add dscp and pcp checks for ingress maps (Fixes: VRVDR-49636)

  [ aroberts ]
  * Add a license header

  [ Alan Dewar ]
  * VCI: op-mode state not fully populated (Fixes: VRVDR-50413)
  * VCI: fix undefined variable error found by pylint3
  * qos-op-mode.pl generates "global symbol" error (Fixes: VRVDR-50459)
  * Add show-ext-buf.pl to vplane-config-qos package (Fixes: VRVDR-50440)
  * VCI: catch IndexError exception in qos_op_mode.py (Fixes: VRVDR-50473)

  [ Alan Robertson ]
  * Make sure the ingress-map commands are protected by if-feature flag

  [ Alan Dewar ]
  * VCI: detaching a qos policy needs a delete/create (Fixes: VRVDR-50529)

 -- aroberts <aroberts@mail.eng.vyatta.net>  Fri, 27 Mar 2020 14:00:34 +0000

vplane-config-qos (3.0.0) unstable; urgency=medium

  [ Alan Dewar ]
  * Reinstate op-mode state retrieval to QoS VCI (Fixes: VRVDR-49189)
  * QoS: reinstate lost PR comments for op-mode VCI (Fixes: VRVDR-49191)

  [ Alan Robertson ]
  * Rename the keyword from to-classifier to designation
  * Fix a build breakage and change mark-map CLI

  [ Daniel Gollub ]
  * Remove historic/stale .frlog file

  [ Narayana Indukuri ]
  * Fix op script to parse the new rprocs JSON element

  [ Alan Dewar ]
  * VCI: don't send "qos commit" when nothing changed
  * VCI: add support for bonded interfaces
  * VCI: add support for deferred/vhost interfaces (Fixes: VRVDR-49148)
  * VCI: allow the Provisioner class to parse NPF config
  * VCI: hook NPF dscp-group config into QoS VCI (Fixes: VRVDR-48985)
  * VCI: use the FWHelper.pm script to build NPF rules (Fixes: VRVDR-48986)
  * QoS: add missing NPF dependency (Fixes: VRVDR-49369)

  [ Sanjay Iyer ]
  * QoS: Added op-mode command to dump DRAM buffer errors (Fixes: VRVDR-47301)

  [ Ethan Li ]
  * No buffer drops: add script for 'show' command
  * No buffer drops: update yang with parameters for "buffer congestion"

  [ Brian Russell ]
  * Update platform show to reflect new config

  [ Alan Dewar ]
  * QoS VCI no longer configures dscp-groups (Fixes: VRVDR-49474)

  [ Brian Russell ]
  * Add designation support to mark-map show output

  [ Alan Dewar ]
  * QoS VCI no longer configures dscp-groups (Fixes: VRVDR-49474)
  * VCI: rename ingress-map as profile-map
  * VCI: Add new IngressMap module and unit-test
  * VCI: add the ingress_map_binding class
  * VCI: link IngressMaps into IngressMapBinding
  * VCI: add support for designation keyword
  * VCI: add the ingress-map complete command
  * VCI: SIAD getting queue limit in packets not bytes (Fixes: VRVDR-49657)
  * VCI: don't modify ingress-maps in-place

  [ aroberts ]
  * Add an op mode command to display the ingress-maps in the dataplane
  * Perltidy changes

  [ Alan Dewar ]
  * Fix the "show .... <if-name> class" output (Fixes: VRVDR-49194)

  [ Brian Russell ]
  * Explicitly specify drop-precedence in yang
  * Explicitly specify drop-precedence in ingress maps
  * Explicitly specify drop-precedence with WRED params
  * Fix yang must checks for ingress maps
  * Fix designation help text
  * Make designation mandatory in ingress-map
  * Stop multiple designations being mapped to the same pipe-queue

  [ Alan Dewar ]
  * Fix getting op-mode state for bonded interfaces (Fixes: VRVDR-49743)

  [ Brian Russell ]
  * Fix ingress map show output for PCP
  * Fix hardware or sofware support based on config

  [ Alan Dewar ]
  * VCI: send the dataplane a percent command (Fixes: VRVDR-49986)

  [ Brian Russell ]
  * Only send global profiles once

  [ Alan Dewar ]
  * VCI: emulate FWHelper.pm's build_rule function (Fixes: VRVDR-49700)
  * VCI: fix "mark-map designation" command (Fixes: VRVDR-50151)
  * VCI: don't log "invalid ethtype name/number" error (Fixes: VRVDR-50192)

  [ Robert Shearman ]
  * platform: block QoS config on DANOS AS5916-54XKS platform

  [ Ramkumar Ganapathysubramanian ]
  * Added warning for QoS CLI where validations were skipped. Root Cause:Some of the QoS policy validations were skipped in the scripts due to incorrect parsing of the command tree node. Fix: Added a warning to alert the user of the skipped validations since we do not want to break the backward compatibility of image upgrades by fixing the CLI issue. VRVDR-48555

  [ Alan Dewar ]
  * Fix getting op-mode state for vhost interfaces (Fixes: VRVDR-49453)
  * VCI: refactor convert_pcp_map functions
  * Add op-mode support for designation maps
  * VCI: make QoS VCI more robust (Fixes: VRVDR-50071)

  [ bs775m ]
  * Disable time based configuration on Q-AX and Q-MX.

  [ Sanjay Iyer ]
  * QoS: Allow bandwidth percentage configuration at subport
    (Fixes: VRVDR-49955)

  [ Alan Dewar ]
  * Make qos-op-mode.pl generate 64-bit JSON strings
  * perltidy -ce qos-op-mode.pl
  * Make qos_op_mode.py generate 64-bit JSON values (Fixes: VRVDR-49997)

  [ Brian Russell ]
  * use interface name rather than ifindex in cfg cmds

 -- aroberts <aroberts@mail.eng.vyatta.net>  Fri, 06 Mar 2020 15:27:11 +0000

vplane-config-qos (2.5.0) unstable; urgency=medium

  * DANOS import master

 -- Vyatta Package Maintainers <DL-vyatta-help@att.com>  Wed, 06 Nov 2019 15:58:06 +0000

vplane-config-qos (2.4) unstable; urgency=medium

  * DANOS import

 -- Vyatta Package Maintainers <DL-vyatta-help@att.com>  Tue, 05 Nov 2019 15:58:06 +0000
